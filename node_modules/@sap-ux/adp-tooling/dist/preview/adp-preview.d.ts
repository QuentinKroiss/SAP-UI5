/// <reference path="../../../../types/ui5.d.ts" />
import type { ReaderCollection } from '@ui5/fs';
import type { MiddlewareUtils } from '@ui5/server';
import type { NextFunction, Request, Response, Router } from 'express';
import type { ToolsLogger } from '@sap-ux/logger';
import type { UI5FlexLayer } from '@sap-ux/project-access';
import type { MergedAppDescriptor } from '@sap-ux/axios-extension';
import type { AdpPreviewConfig, DescriptorVariant } from '../types';
export declare const enum ApiRoutes {
    FRAGMENT = "/adp/api/fragment",
    CONTROLLER = "/adp/api/controller",
    CODE_EXT = "/adp/api/code_ext/:controllerName"
}
/**
 * Instance of an adaptation project handling requests and data transformation.
 */
export declare class AdpPreview {
    private readonly config;
    private readonly project;
    private readonly util;
    private readonly logger;
    /**
     * Merged descriptor variant with reference app manifest
     */
    private mergedDescriptor;
    /**
     * Routes handler class to handle API requests
     */
    private routesHandler;
    /**
     * @returns merged manifest.
     */
    get descriptor(): MergedAppDescriptor;
    /**
     * @returns a list of resources required to the adaptation project as well as the original app.
     */
    get resources(): {
        [x: string]: string;
    };
    /**
     * Constructor taking the config and a logger as input.
     *
     * @param config adp config
     * @param project reference to the root of the project
     * @param util middleware utilities provided by the UI5 CLI
     * @param logger logger instance
     */
    constructor(config: AdpPreviewConfig, project: ReaderCollection, util: MiddlewareUtils, logger: ToolsLogger);
    /**
     * Fetch all required configurations from the backend and initialize all configurations.
     *
     * @param descriptorVariant descriptor variant from the project
     * @returns the UI5 flex layer for which editing is enabled
     */
    init(descriptorVariant: DescriptorVariant): Promise<UI5FlexLayer>;
    /**
     * Proxy for the merged application manifest.json and blocking of preload files.
     *
     * @param req incoming request
     * @param res outgoing response object
     * @param next next middleware that is to be called if the request cannot be handled
     */
    proxy(req: Request, res: Response, next: NextFunction): Promise<void>;
    /**
     * Add additional APIs to the router that are required for adaptation projects only.
     *
     * This method sets up various GET and POST routes for handling fragments, controllers,
     * and code extensions. For POST routes to work correctly, ensure that the router is
     * using the **express.json()** middleware. This middleware is responsible for parsing
     * incoming requests with JSON payloads and is based on body-parser.
     *
     * Usage:
     * ```ts
     * import express from "express";
     *
     * const app = express();
     * const router = express.Router();
     *
     * // Ensure express.json() middleware is applied to the router or app
     * router.use(express.json());
     *
     * const adp = new AdpPreview();
     * adp.addApis(router);
     *
     * app.use('/', router);
     * ```
     *
     * @param {Router} router - The router that is to be enhanced with the API.
     * @returns {void} A promise that resolves when the APIs have been added.
     */
    addApis(router: Router): void;
}
//# sourceMappingURL=adp-preview.d.ts.map