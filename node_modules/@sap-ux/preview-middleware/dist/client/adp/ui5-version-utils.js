"use strict";

sap.ui.define([], function () {
  "use strict";

  /**
   * Checks if the given version is lower than the required minimal version.
   * @param version to check
   * @param minVersion to check
   *
   * @returns boolean
   */
  function isLowerThanMinimalUi5Version(version, minVersion) {
    if (version && minVersion) {
      const minVersionParsed = parseUI5Version(minVersion);
      const ui5VersionParsed = parseUI5Version(version);
      if (!isNaN(ui5VersionParsed.major) && !isNaN(ui5VersionParsed.minor)) {
        if (ui5VersionParsed.major < minVersionParsed.major) {
          return true;
        }
        if (ui5VersionParsed.major === minVersionParsed.major && ui5VersionParsed.minor < minVersionParsed.minor) {
          return true;
        }
      }
    }
    return false;
  }

  /**
   * Get UI5 version validation message based on conditions.
   * @param ui5Version to validate
   * @returns string with validation message or undefined if non condition is met.
   */
  function getUI5VersionValidationMessage(ui5Version) {
    if (isLowerThanMinimalUi5Version(ui5Version, '1.71')) {
      return `The current SAPUI5 version set for this Adaptation project is ${ui5Version}. The minimum version to use for SAPUI5 Adaptation Project and its SAPUI5 Visual Editor is 1.71`;
    }
    return undefined;
  }

  /**
   * Parses the UI5 version
   * Returns NaN for snapshot or snapshot-untested
   * Returns x.xx for snapshot-x.xx
   *
   * @param version the UI5 version to parse
   * @returns The major and the minor version, e.g. 1.86
   */
  function parseUI5Version(version) {
    const versionParts = version.replace(/snapshot-untested|snapshot-|snapshot/, '').split('.');
    const major = parseInt(versionParts[0], 10);
    const minor = parseInt(versionParts[1], 10);
    return {
      major,
      minor
    };
  }
  var __exports = {
    __esModule: true
  };
  __exports.isLowerThanMinimalUi5Version = isLowerThanMinimalUi5Version;
  __exports.getUI5VersionValidationMessage = getUI5VersionValidationMessage;
  return __exports;
});
//# sourceMappingURL=ui5-version-utils.js.map