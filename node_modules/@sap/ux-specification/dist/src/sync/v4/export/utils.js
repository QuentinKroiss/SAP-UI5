"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.extractLastIdPart = exports.updateDependencyLib = void 0;
/**
 * Method updates passed dependency lib in passed manifest.
 * @param {SapUi5V4} manifest - Manifest "sap.ui5" object.
 * @param {string} name - Library name to check.
 * @param {boolean} [add=true] - Add or remove library.
 */
function updateDependencyLib(manifest, name, add = true) {
    if (add) {
        if (!manifest.dependencies) {
            manifest.dependencies = {};
        }
        if (!manifest.dependencies.libs) {
            manifest.dependencies.libs = {};
        }
        if (manifest.dependencies.libs[name] === undefined) {
            manifest.dependencies.libs[name] = {};
        }
    }
    else if (manifest.dependencies && manifest.dependencies.libs && manifest.dependencies.libs[name] !== undefined) {
        delete manifest.dependencies.libs[name];
    }
}
exports.updateDependencyLib = updateDependencyLib;
/**
 * Looks for <...> pattern in the input string; if found, extracts this last part of the string
 * @param longId - schema ID in its long format
 * @returns the converted ID
 */
function extractLastIdPart(longId) {
    let lastIdPart = longId;
    if (longId.indexOf('<') > -1) {
        lastIdPart = longId.substring(longId.indexOf('<') + 1, longId.length - 1);
        const navPart = longId.substring(0, longId.lastIndexOf('::')).replace(/::/g, '/');
        if (navPart) {
            lastIdPart = `${navPart}/${lastIdPart}`;
        }
    }
    return lastIdPart;
}
exports.extractLastIdPart = extractLastIdPart;
//# sourceMappingURL=utils.js.map